import{j as o,b as t,d as b,q as E,W as U,r as j,F as z,c as $}from"./app-b5400095.js";import{C as q}from"./Card-fdb03dd0.js";import{U as D,S as H,i as L,D as Y}from"./Dashboard-7e829a24.js";import{T as B}from"./TextArea-91952a6b.js";import{B as W}from"./Breadcrumb-861bfeaa.js";import{r as h,t as u,d as F,a as T,g as P}from"./index-4c8a935a.js";import{e as G}from"./index-a6234c53.js";function N(r,a){h(2,arguments);var e=u(r),l=u(a),n=e.getTime()-l.getTime();return n<0?-1:n>0?1:n}function J(r,a){h(2,arguments);var e=u(r),l=u(a),n=e.getFullYear()-l.getFullYear(),d=e.getMonth()-l.getMonth();return n*12+d}function K(r,a){return h(2,arguments),u(r).getTime()-u(a).getTime()}var S={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(a){return a<0?Math.ceil(a):Math.floor(a)}},Q="trunc";function V(r){return r?S[r]:S[Q]}function Z(r){h(1,arguments);var a=u(r);return a.setHours(23,59,59,999),a}function ee(r){h(1,arguments);var a=u(r);return Z(a).getTime()===G(a).getTime()}function re(r,a){h(2,arguments);var e=u(r),l=u(a),n=N(e,l),d=Math.abs(J(e,l)),s;if(d<1)s=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-n*d);var f=N(e,l)===-n;ee(u(r))&&d===1&&N(r,l)===1&&(f=!1),s=n*(d-Number(f))}return s===0?0:s}function ae(r,a,e){h(2,arguments);var l=K(r,a)/1e3;return V(e==null?void 0:e.roundingMethod)(l)}function C(r,a){if(r==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e]);return r}function te(r){return C({},r)}var I=1440,ne=2520,M=43200,se=86400;function ie(r,a,e){var l,n;h(2,arguments);var d=P(),s=(l=(n=e==null?void 0:e.locale)!==null&&n!==void 0?n:d.locale)!==null&&l!==void 0?l:F;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var f=N(r,a);if(isNaN(f))throw new RangeError("Invalid time value");var i=C(te(e),{addSuffix:!!(e!=null&&e.addSuffix),comparison:f}),p,v;f>0?(p=u(a),v=u(r)):(p=u(r),v=u(a));var g=ae(v,p),m=(T(v)-T(p))/1e3,c=Math.round((g-m)/60),x;if(c<2)return e!=null&&e.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,i):g<10?s.formatDistance("lessThanXSeconds",10,i):g<20?s.formatDistance("lessThanXSeconds",20,i):g<40?s.formatDistance("halfAMinute",0,i):g<60?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",1,i):c===0?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",c,i);if(c<45)return s.formatDistance("xMinutes",c,i);if(c<90)return s.formatDistance("aboutXHours",1,i);if(c<I){var R=Math.round(c/60);return s.formatDistance("aboutXHours",R,i)}else{if(c<ne)return s.formatDistance("xDays",1,i);if(c<M){var X=Math.round(c/I);return s.formatDistance("xDays",X,i)}else if(c<se)return x=Math.round(c/M),s.formatDistance("aboutXMonths",x,i)}if(x=re(v,p),x<12){var k=Math.round(c/M);return s.formatDistance("xMonths",k,i)}else{var y=x%12,w=Math.floor(x/12);return y<3?s.formatDistance("aboutXYears",w,i):y<9?s.formatDistance("overXYears",w,i):s.formatDistance("almostXYears",w+1,i)}}function O(r,a){return h(1,arguments),ie(r,Date.now(),a)}const _=({replay:r,user:a})=>{const{attachment:e,description:l,created_at:n}=r,d=s=>{const f=new Date(s),i=O(f,{includeSeconds:!0});return i.charAt(0).toUpperCase()+i.slice(1)};return o("div",{className:"flex w-full mt-2 space-x-3 ml-auto pl-20 md:pl-[160px] justify-end",children:[o("div",{children:[o("div",{className:"bg-blue-600 text-white rounded-l-lg rounded-br-lg overflow-hidden",children:[e&&t("img",{className:"w-full",src:`/${e}`,alt:""}),t("p",{className:"text-sm p-3",children:l})]}),o("span",{className:"text-xs text-gray-500 leading-none",children:[d(n)," ago"]})]}),t("div",{className:"flex-shrink-0 h-10 w-10 rounded-full",children:a&&a.image?t(b.Avatar,{src:`/${a.image}`,alt:"item-1",size:"xs",variant:"circular",className:"h-10 w-10"}):t(D,{className:"h-10 w-10 text-blue-gray-500"})})]})},A=({replay:r,user:a})=>{const{attachment:e,description:l,created_at:n}=r,d=s=>{const f=new Date(s),i=O(f,{includeSeconds:!0});return i.charAt(0).toUpperCase()+i.slice(1)};return o("div",{className:"flex w-full mt-2 space-x-3 pr-20 md:pr-[160px]",children:[t("div",{className:"flex-shrink-0 rounded-full",children:a&&a.image?t(b.Avatar,{src:`/${a.image}`,alt:"item-1",size:"xs",variant:"circular",className:"h-10 w-10"}):t(D,{className:"h-10 w-10 text-blue-gray-500"})}),o("div",{children:[o("div",{className:"bg-gray-200  rounded-r-lg rounded-bl-lg overflow-hidden",children:[e&&t("img",{className:"w-full",src:`/${e}`,alt:""}),t("p",{className:"text-sm p-3",children:l})]}),o("span",{className:"text-xs text-gray-500 leading-none",children:[d(n)," ago"]})]})]})},le=r=>{const e=E().url.split("/")[1],{support:l,auth:n}=r,{data:d,setData:s,post:f,reset:i,wasSuccessful:p}=U({support_id:l.id,replay_from:n.user.role,attachment:"",description:""}),v=m=>{s(m.target.name,m.target.value)},g=async m=>{m.preventDefault(),f(route("support-request.replay"))};return j.useEffect(()=>{p&&(i("attachment"),i("description"))},[p]),o(z,{children:[t($,{title:"Support Conversation"}),t(W,{Icon:H,title:"Support Request Create"}),o(q,{className:"max-w-[1000px] w-full mx-auto mt-8",children:[t("div",{className:"px-7 pt-7 pb-4 border-b border-b-gray-200",children:o("div",{className:"flex flex-col md:flex-row md:items-end justify-between",children:[o("div",{className:"flex items-center",children:[n.user&&n.user.image?t(b.Avatar,{src:`/${user.image}`,alt:"item-1",size:"xs",variant:"circular",className:n.user.role==="admin"?"h-12 w-12":"h-10 w-10"}):t(D,{className:`text-blue-gray-500 ${n.user.role==="admin"?"h-12 w-12":"h-10 w-10"}`}),o("div",{className:"flex flex-col ml-2",children:[t("small",{className:"font-medium text-gray-900",children:n.user.role==="admin"?n.user.name:"Admin"}),n.user.role==="admin"&&o("small",{className:"font-medium text-gray-900 mt-2",children:["Ticket Id:"," ",t("span",{className:"text-primary-500",children:l.ticket_id})]})]})]}),n.user.role==="admin"&&o("small",{className:"font-medium text-gray-900 mt-3",children:["Document Subject:"," ",t("span",{className:"text-primary-500",children:l.subject})]})]})}),t(L,{className:"flex flex-col flex-grow p-7 h-[500px] overflow-y-auto bg-gray-25",children:l.replays.map(m=>{const{replay_from:c}=m;return e==="admin"?c==="user"?t(A,{replay:m,user:n.user}):t(_,{replay:m,user:n.user}):c==="user"?t(_,{replay:m,user:n.user}):t(A,{replay:m,user:n.user})})}),o("form",{onSubmit:g,encType:"multipart/form-data",className:"p-7",children:[o("div",{className:"flex flex-col items-start md:flex-row md:items-center",children:[t("small",{className:"max-w-[164px] w-full mb-1 whitespace-nowrap font-medium text-gray-500",children:t("span",{className:"mr-1",children:"Attachment"})}),t("input",{type:"file",onChange:m=>s("attachment",m.target.files[0]),className:"relative m-0 block w-full min-w-0 flex-auto rounded-md border border-solid border-neutral-300 dark:border-neutral-600 bg-clip-padding py-[8px] px-2.5 text-sm font-normal text-neutral-700 dark:text-neutral-200 transition duration-300 ease-in-out file:-mx-3 file:-my-[8px] file:overflow-hidden file:rounded-none file:border-0 file:border-solid file:border-inherit file:bg-neutral-100 dark:file:bg-neutral-700 file:px-3 file:py-[8px] file:text-neutral-700 dark:file:text-neutral-100 file:transition file:duration-150 file:ease-in-out file:[margin-inline-end:0.75rem] file:[border-inline-end-width:1px] hover:file:bg-neutral-200 !border-gray-200 focus:!border-primary-500 focus:outline-0"})]}),t("div",{className:"mt-8",children:t(B,{rows:4,flexLabel:!0,fullWidth:!0,name:"description",value:d.description,label:"Message",placeholder:"Describe what we can do for you.",onChange:v,maxLength:400,required:!0})}),o("div",{className:"flex items-center mt-10 md:pl-[164px]",children:[t(b.Button,{type:"submit",variant:"text",color:"white",className:"bg-primary-500 hover:bg-primary-500 active:bg-primary-500 font-medium capitalize rounded-md outline-primary-500",children:"Create"}),t(b.Button,{variant:"outlined",color:"red",type:"button",className:"ml-3 capitalize border-black text-gray-900",children:t("span",{children:"Cancel"})})]})]})]})]})};le.layout=r=>t(Y,{children:r});export{le as default};
