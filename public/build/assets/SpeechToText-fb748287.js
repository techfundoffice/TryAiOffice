import{r as c,W as q,j as a,F as A,b as e,c as E,d as F,a as j}from"./app-b5400095.js";import{C as B}from"./Card-fdb03dd0.js";import{I as H}from"./Input-7f1bcea1.js";import{S as M}from"./Spinner-fff71d0d.js";import{B as S}from"./Breadcrumb-861bfeaa.js";import{T as U}from"./TextSaveEditor-176607b4.js";import{T as W}from"./TextArea-91952a6b.js";import{h as v,g as z,D as O,e as P}from"./Dashboard-7e829a24.js";import{g as R}from"./katex-cb607707.js";const $=x=>{const{auth:p,todaysTexts:T}=x,[w,b]=c.useState(!1),[C,m]=c.useState(!1),[o,g]=c.useState({title:"",description:"",text:""}),{data:t,setData:y,reset:I}=q({title:"",description:"",audio:""}),N=s=>{y(s.target.name,s.target.value)},[u,h]=c.useState({title:null,audio:null,description:null}),D=s=>{const l=s.target.files;l&&l[0]&&y("audio",l[0])},_=async s=>{s.preventDefault(),m(!0);const l=await R(t.audio);g({title:t.title,description:t.description,text:""}),h({title:null,audio:null,description:null});try{const r=new FormData;r.append("audio",t.audio),r.append("title",t.title),r.append("description",t.description),r.append("audio_length",l);const i=await j.post("/speech-to-text",r);i.data.error?(P(i.data.error),m(!1)):(I(),m(!1),g(n=>({...n,text:i.data.text})))}catch(r){m(!1);const{audio:i,title:n,description:f}=r.response.data.errors;i&&i[0]&&h(d=>({...d,audio:i[0]})),n&&n[0]&&h(d=>({...d,title:n[0]})),f&&f[0]&&h(d=>({...d,description:f[0]}))}},L=()=>{g({title:"",description:"",audio:""})};return c.useEffect(()=>{o.title.length>0&&o.description.length>0&&o.text.length>0?b(!0):b(!1)},[o]),a(A,{children:[e(E,{title:"Speech to text"}),p.user.role==="admin"?e(S,{Icon:v,title:"Speech to text"}):e(S,{Icon:z,title:"Speech to text",totalCount:T||0,maxLimit:p.user.subscription_plan.speech_to_text_generation}),a("div",{className:"grid grid-cols-12 gap-7",children:[e("div",{className:" col-span-12 lg:col-span-4",children:a(B,{children:[a("div",{className:"p-5 border-b border-gray-100 flex items-center",children:[e(v,{className:"w-5 h-5 text-gray-400 mr-2"}),e("p",{className:"text18 text-gray-600",children:"Speech To Text"})]}),a("form",{onSubmit:_,className:"p-5",children:[e("div",{children:e(H,{name:"title",label:"Title",value:t.title,error:u.title,onChange:N,placeholder:"New Code",maxLength:50,required:!0})}),a("div",{className:"mt-5",children:[a("p",{className:"mb-4 text-sm font-medium text-gray-500",children:["Upload audio ",e("span",{className:"text-red-500",children:"*"})]}),e("label",{htmlhtmlFor:"audio",className:"border border-gray-200 hover:border-primary-500 px-5 py-3 text-sm text-gray-500 hover:text-primary-500 h-10 font-bold rounded-lg cursor-pointer",children:"Upload Audio"}),e("input",{id:"audio",type:"file",name:"audio",onChange:D,required:!0,hidden:!0}),e("p",{className:"text-xs text-gray-500 mt-4",children:`Max speech duration ${p.user.role==="admin"?"unlimited for admin":p.user.subscription_plan.speech_duration+" minutes"}`}),u.audio&&e("p",{className:"text-sm text-red-500 mt-1",children:u.audio})]}),a("div",{className:"mt-6",children:[e(W,{rows:8,name:"description",label:"Description",value:t.description,error:u.description,onChange:N,placeholder:"e.g. describe about your code",className:"min-h-0",maxLength:200,required:!0}),e("p",{className:"text-xs text-gray-500 mt-2",children:"To assist the AI, describe the speech from the file."})]}),e(F.Button,{type:"submit",className:"capitalize bg-primary-500 text-white text-sm px-5 mt-10 py-0 h-10",color:"white",fullWidth:!0,children:C?e(M,{className:"text-white !w-6 !h-6 !border-2"}):e("span",{children:"Submit"})})]})]})}),e("div",{className:"col-span-12 lg:col-span-8",children:e(U,{textInfo:o,request:"POST",isSubmit:w,clearHandler:L})})]})]})};$.layout=x=>e(O,{children:x});export{$ as default};
