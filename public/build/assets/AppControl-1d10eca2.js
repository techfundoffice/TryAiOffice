import{r,a as u,j as a,F as h,b as e,c as f,d as s,g}from"./app-b5400095.js";import{C as x,D as b}from"./Dashboard-7e829a24.js";import{B as v}from"./Breadcrumb-861bfeaa.js";const y=({version:n})=>{const[i,l]=r.useState(!1),[o,d]=r.useState(!1),[t,c]=r.useState();r.useEffect(()=>{u.get("/version/check").then(({data:m})=>c(m))},[]);const p=()=>{t!=null&&t.update_available&&(l(!1),d(!0),g.get("/version/update"))};return a(h,{children:[e(f,{title:"App Control"}),e(v,{Icon:x,title:"App Control"}),a("div",{className:"",children:[a("p",{className:"font-medium",children:["Current installed version: ",e("span",{className:"font-normal",children:n})]}),a("p",{className:"font-medium mt-4 mb-8",children:["Available latest version: ",e("span",{className:"font-normal",children:(t==null?void 0:t.version)??"..."})]}),e(s.Button,{type:"submit",color:"white",onClick:()=>l(!0),disabled:!(t!=null&&t.update_available),className:"capitalize bg-primary-500 text-white text-sm !rounded-lg px-5",children:"Update App Version"})]}),a(s.Dialog,{size:"xs",open:i,handler:()=>l(!1),className:"px-6 py-10 max-h-[calc(100vh-80px)] overflow-y-auto text-gray-800",children:[e("h6",{className:"text-red-500 text-center text-xl mb-10",children:"Are you sure to update the current version?"}),a("div",{className:"flex items-center justify-center",children:[e(s.Button,{color:"red",className:"py-2 font-medium capitalize text-base mr-6",onClick:()=>l(!1),children:e("span",{children:"Cancel"})}),e(s.Button,{type:"submit",color:"white",onClick:p,className:"capitalize bg-primary-500 text-white text-sm !rounded-lg px-5 py-2.5",children:"Update"})]})]}),e(s.Dialog,{size:"sm",open:o,handler:()=>null,className:"bg-transparent border-none outline-none shadow-none",children:a("div",{className:"bg-warning-100 text-gray-900 p-4 rounded-md",children:[e("p",{className:"text-justify font-medium mb-6",children:"Your app is currently undergoing an automatic update. This process will take a few minutes. Please don't refresh your page or don't turn off your device. Just stay with this process."}),e("div",{className:"relative w-full bg-gray-200 rounded-full",children:e("div",{className:"shim-blue top-0 h-4 w-full relative overflow-hidden bg-primary-500 rounded-full"})})]})})]})};y.layout=n=>e(b,{children:n});export{y as default};
